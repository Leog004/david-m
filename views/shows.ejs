<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Theme Region">
       	<meta name="description" content="">

        <title>David M</title>

         <!-- Fonts -->
        <link href='https://fonts.googleapis.com/css?family=Cookie' rel='stylesheet' type='text/css'>
		
        <!-- icons -->
 

        <!-- CSS -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">  
        <link rel="stylesheet" href="css/jplayer.css"> 
        <link rel="stylesheet" href="css/beat.css">         
        <link rel="stylesheet" href="css/magnific-popup.css">
        <link rel="stylesheet" href="css/owl.carousel.css">      
        <link rel="stylesheet" href="css/cubeportfolio.min.css">      
        <link rel="stylesheet" href="css/main.css"> 
        <link rel="stylesheet" href="css/responsive.css">         

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    <style>

        #navigation .navbar:after,  #navigation .navbar:before{
            border-top: 30px solid transparent;
            background-color: transparent;
        }
        
        .video-overlay {
        
            background-color:rgb(0,0,0,0.4) !important;
        }
        .homevid{
            width:50%;
        }
        
        .btn.btn-primary{
        
            background-color:#000;
            border: 1px solid #000;
        }
        
        .btn.btn-primary::hover{
            color:#000 !important;
        }        

        .festival-info {
            box-shadow: rgba(6, 24, 44, 0.4) 0px 0px 0px 2px, rgba(6, 24, 44, 0.65) 0px 4px 6px -1px, rgba(255, 255, 255, 0.08) 0px 1px 0px inset;
            cursor: pointer;
        }
        
        @media (max-width: 991px){
         .homevid{
            width:100%;
            margin: 40px 0;
        }         
                
                .band-banner .home-content h1, .home-banner.biography .home-content h1 {
                 font-size: 45px;
                  line-height: 42px;
            }
        }
    </style>
    </head>
    <body>
        <% include partials/header %>

                        <!-- Set all my variables -->
                        <% var backgroundImage = showPage?.headerImage?.url || '/images/DavidP/IMG_6469.png'; %>


        <div class="feedback section-padding before-after" style="margin-top:80px;">
                <div class="entry-post" style="background-image:url('<%= backgroundImage %>'); height:50vh;background-size: cover; background-repeat: no-repeat;background-position: center;">
                    <% include partials/social %>              
                </div>                     
        </div><!-- feedback -->   
        
        <% if (showPage?.shows.length > 0) { %>

            <script>
                function showIframe(index){
                    var iframe = document.getElementById(`${index}`);
                    var btn = document.getElementById(`${index}-btn`);
                    // check if iframe is already displayed and change text to hide map
                    if (iframe.style.display === "block") {
                        iframe.style.display = "none";
                        btn.innerText = "view Map";
                    } else {
                        iframe.style.display = "block";
                        btn.innerText = "hide Map";
                    }
                }
            </script>
        <div class="ucoming-events section-padding before-after">
            <div class="container">
                <div class="section-title">
                    <h4>Upcoming Shows</h4>
                    <h2></h2>
                </div>
                <ul class="schedule-menu list-inline" style="box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px;">
                    <li><a href="#">Date</a>
                    <div class="dropdown category-dropdown"> 
                        <a data-toggle="dropdown" href="#">
                            <span class="change-text">
                                <% if (descendingOrder) { %>
                                    (Descend)
                                    <i class="fa fa-angle-down"></i>
                                <% } else { %>
                                    (Ascend)
                                    <i class="fa fa-angle-up"></i>
                                <% } %>
                            </span>
                           
                        </a>
                        <ul class="dropdown-menu category-change">
                            <li><a href="?order=ascend">Ascend</a></li>
                            <li><a href="?order=descend">Descend</a></li>
                        </ul>                               
                    </div>
                    </li>
                    <li><a href="#">Events Title</a></li>
                    <li><a href="#">Address</a></li>
                </ul><!-- schedule menu -->                 

                <ul>
                    <% showPage?.shows.forEach((show, index)=> { %>
                        <% 
                            <!-- if no show?.image?.url exists. Get random image from images/jazzEventImage/image1-image3.jpg -->
                            let image = show?.image?.url || `/images/jazzEventImage/image${Math.floor(Math.random() * 3) + 1}.jpg`;
                        
                        %>
                        <li class="festival-info">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="festival-image">
                                        <div class="image-overlay"></div>
                                        <img class="img-fluid" src="<%= image %>" alt="Image">
                                        <div class="time">
                                            <!-- get show?.date [2023-11-02] to output day = 11, month = feb -->
                                            <h1><%= show?.date?.split('-')[2] %> <span><%= show?.date?.split('-')[1] %></span></h1>
                                            <!-- <h1>11 <span>Fev</span></h1> -->
                                        </div>                                        
                                    </div>
                                    <div class="events-title">
                                        <h2><%= show?.title %></h2>
                                        <h5><%= show?.description %> </h5>
                                    </div>                                
                                </div>
                                <div class="col-md-3 no-padding">
                                    <div class="address">
                                        <h5><%= show?.address %></h5>
                                        <!-- if show?.direction exists -->
                                        <% if (show?.direction) { %>
                                            <button id="show-<%= index %>-btn" class="btn btn-secondary btn-sm" style="display: block; margin: 10px 0;" type="button" onclick="javascript:showIframe('show-<%= index %>')">view map</button>

                                            <%
                                                <!-- let locationURL = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3222.7623022103887!2d${location.longitude}!3d${location.latitude}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80953b16787741f1%3A0x2e12e9e1ab9cdef0!2sYour%20Location%20Name!5e0!3m2!1sen!2sus!4v1628361791337!5m2!1sen!2sus"; -->
                                                let locationURL = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3222.7623022103887!2d${longitude}!3d${latitude}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80953b16787741f1%3A0x2e12e9e1ab9cdef0!2sYour%20Location%20Name!5e0!3m2!1sen!2sus!4v1628361791337!5m2!1sen!2sus&q=${latitude},${longitude}";

                                                // Replace longitude and latitude placeholders with actual values
                                                locationURL = locationURL.replace("${longitude}", show.direction.longitude);
                                                locationURL = locationURL.replace("${latitude}", show.direction.latitude);
                                        %>

                                            <iframe class='show-iframe' style="display:none;" id="show-<%= index %>" src="<%= locationURL %>" width="450" height="300" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                                        <% } %>
                                    </div>
                                </div>
                                <div class="col-md-3 no-padding">
                                    <div class="button">
                                        <a href="<%= show.eventLink %>" class="btn btn-primary">Get a Ticket<i class="fa fa-chevron-circle-right"></i></a>
                                    </div>
                                </div>
                            </div><!-- row -->
                        </li>
                    <% }) %>            
                </ul>                               
            </div><!-- row -->             
        </div>  
  
        <% } %>
       
<!-- partials footer -->
<% include partials/footer %>



        <!-- JS -->
        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>      
        <script src="js/gmaps.min.js"></script>          
        <script src="js/jquery.jplayer.min.js"></script> 
        <script src="js/jplayer.playlist.min.js"></script> 
        <script src="js/jquery.plugin.js"></script> 
        <script src="js/jquery.countdown.js"></script>    
        <script src="js/magnific-popup.min.js"></script>    
        <script src="js/jquery.backstretch.min.js"></script>
        <script src="js/owl.carousel.min.js"></script> 
        <script src="js/inview.min.js"></script> 
        <script src="js/jquery.spinner.min.js"></script> 
        <script src="js/cubeportfolio.min.js"></script>    
        <script src="js/jplayer.source.js"></script>
        <script src="js/main.js"></script>         
    </body>
</html>